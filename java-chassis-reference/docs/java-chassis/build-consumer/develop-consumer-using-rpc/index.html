<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Using with RPC - ServiceComb Java Chassis 开发指南</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Using with RPC";
    var mkdocs_page_input_path = "build-consumer\\develop-consumer-using-rpc.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> ServiceComb Java Chassis 开发指南</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <span class="caption-text">Getting Started</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../start/terminology/">Glossary</a>
                </li>
                <li class="">
                    
    <a class="" href="../../start/architecture/">Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../../start/development-environment/">Development environment</a>
                </li>
                <li class="">
                    
    <a class="" href="../../start/first-sample/">Develop the first microservice</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Development Service Provider</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../build-provider/definition/service-definition/">Service definition</a>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/define-contract/">Service contract definition</a>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/code-first/">Implicit API definition</a>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/swagger-annotation/">Use Swagger annotations</a>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/springmvc/">Develop with SpringMVC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/jaxrs/">Develop with JAX-RS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/transparent-rpc/">Develop with Transparent RPC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/interface-constraints/">Interface definition and data type</a>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/listen-address-and-publish-address/">Service listening address and publishing address</a>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/thread-pool/">Thread pool</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Service Configuration</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../build-provider/configuration/lb-strategy/">Load Balancing Policy</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../build-provider/configuration/ratelimite-strategy/">Rate Limiting Policy</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../build-provider/configuration/downgrade-strategy/">Fallback Policy</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../build-provider/configuration/parameter-validator/">Parameter Validator</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/bootup/">Boot-up Process</a>
                </li>
                <li class="">
                    
    <a class="" href="../../build-provider/access-log-configuration/">Access Log Configuration</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Writing Service Consumer</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../common-configuration/">Consumer common configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../using-resttemplate/">Using Rest Template</a>
                </li>
                <li class="">
                    
    <a class="" href="../using-AsyncRestTemplate/">Using AsynRestTemplate</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Using with RPC</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#develop-consumer-with-transparent-rpc">Develop consumer with transparent RPC</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#concepts">Concepts</a></li>
        
            <li><a class="toctree-l4" href="#declare-prc-by-rpcreference-in-spring-bean">Declare PRC by @RpcReference in spring bean</a></li>
        
            <li><a class="toctree-l4" href="#declare-by-api-without-spring-bean">Declare by API without spring bean</a></li>
        
            <li><a class="toctree-l4" href="#reactive">reactive</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../with-contract/">Contract</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Invoke control</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../circuit-breaker/">Circuit Breaker</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../flow-control/">Flow Control</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../fault-injection/">Fault Injection</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../3rd-party-service-invoke/">Invoke 3rd-party REST services</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Transports</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../transports/rest-over-servlet/">REST over Servlet</a>
                </li>
                <li class="">
                    
    <a class="" href="../../transports/rest-over-vertx/">REST over Vertx</a>
                </li>
                <li class="">
                    
    <a class="" href="../../transports/highway-rpc/">Highway</a>
                </li>
                <li class="">
                    
    <a class="" href="../../transports/http2/">HTTP2</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">General Development</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../general-development/visit-sc/">Access Service Center</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/metrics/">Metrics</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/microservice-invocation-chain/">Microservice invocation chain</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/customized-tracing/">Customized-Tracing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/local-develop-test/">Local development and testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/http-filter/">Http Filter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/file-upload/">File Uploading</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/file-download/">File Downloading</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/reactive/">Reactive Programing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/dnsconfig/">DNS Custom Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/dai-li-she-zhi/">Proxy Settings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/report-framework-version/">Report framework version</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/cross-app-invocation/">Cross-application invocation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/secret-field/">Customized serialization and deserialization</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/context/">Using Context to pass control messages</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/produceprocess/">Return value serialization extension</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/CORS/">CORS mechanism</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/AlarmEvent/">Get fuse and instance isolation alarm event information</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/shutdown/">Shutdown gracefully</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/error-handling/">Handling exceptions</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/multienvironment/">Multi-environment isolation between microservice instances</a>
                </li>
                <li class="">
                    
    <a class="" href="../../general-development/thread-model/">Thread Model</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Configuration</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../config/general-config/">General config</a>
                </li>
                <li class="">
                    
    <a class="" href="../../config/inject-config/">Configuration injection</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Service Capability Open</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../edge/by-servicecomb-sdk/">Using Edge Service</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edge/nginx/">Using confd and Nginx as edge services</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edge/zuul/">Use zuul as edge services</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Service Packing and Running</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../packaging/standalone/">Standalone mode</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/web-container/">WEB container mode</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Micro Service Security</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../security/tls/">Using TLS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../security/rsa/">Using RSA certification</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Using java chassis in Spring Boot</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../using-java-chassis-in-spring-boot/components-for-spring-boot/">spring boot starter for java-chassis</a>
                </li>
                <li class="">
                    
    <a class="" href="../../using-java-chassis-in-spring-boot/java-application/">JAVA application development</a>
                </li>
                <li class="">
                    
    <a class="" href="../../using-java-chassis-in-spring-boot/web-application/">Web development method development</a>
                </li>
                <li class="">
                    
    <a class="" href="../../using-java-chassis-in-spring-boot/diff-between-java-web/">The difference between JAVA application method and Web development method</a>
                </li>
                <li class="">
                    
    <a class="" href="../../using-java-chassis-in-spring-boot/diff-spring-mvc/">The difference in Spring MVC mode</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Handlers reference</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../references-handlers/loadbalance/">Load Balancing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../references-handlers/publickey/">Public key authentication</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">FAQ</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../question-and-answer/interface-compatibility/">Micro Service Interface Compatibility FAQ</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">ServiceComb Java Chassis 开发指南</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Writing Service Consumer &raquo;</li>
        
      
    
    <li>Using with RPC</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="develop-consumer-with-transparent-rpc">Develop consumer with transparent RPC</h1>
<h2 id="concepts">Concepts</h2>
<p>The transparent RPC allows user to access services like a local call through a simple java interface.
Transparent RPC is just a development mode:</p>
<ul>
<li>Not associated with highway or RESTful transport</li>
<li>The RPC does not rely on producers' development mode(transparent RPC/Jax-RS or SpringMVC)</li>
<li>The RPC works even if the producer doesn't implement the interface.</li>
</ul>
<p>The transparent RPC is similar to spring cloud's feign, but simpler because there is no need to add any RESTful annotations in interface.</p>
<h2 id="declare-prc-by-rpcreference-in-spring-bean">Declare PRC by @RpcReference in spring bean</h2>
<pre><code class="java">@Component
public class SomeBean {
  ......

  @RpcReference(microserviceName = &quot;helloService&quot;, schemaId = &quot;helloSchema&quot;)
  private Hello hello;

  ......
}
</code></pre>

<h2 id="declare-by-api-without-spring-bean">Declare by API without spring bean</h2>
<pre><code class="java">Hello hello = Invoker.createProxy(&quot;helloService&quot;, &quot;helloSchema&quot;, Hello.class);
</code></pre>

<h2 id="reactive">reactive</h2>
<p>Just use jdk's CompletableFuture to wrap the return value:</p>
<pre><code class="java">interface Hello {
  CompletableFuture&lt;String&gt; sayHi(String name);
}
</code></pre>

<p>In the same interface, you can declare both the reactive and synchronous prototypes of the same method.
It is illegal in java that the method name is the same with the operationId in the contract while the return value type is different, so you need to modify the method name and declare the real operationId through the swagger annotation.</p>
<pre><code class="java">interface Hello {
  String sayHi(String name);

  @ApiOperation(nickname = &quot;sayHi&quot;, value = &quot;reactive method for sayHi&quot;)
  CompletableFuture&lt;String&gt; asyncSayHi(String name);
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../with-contract/" class="btn btn-neutral float-right" title="Contract">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../using-AsyncRestTemplate/" class="btn btn-neutral" title="Using AsynRestTemplate"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../using-AsyncRestTemplate/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../with-contract/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
